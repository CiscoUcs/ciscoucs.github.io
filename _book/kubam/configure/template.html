
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Kickstart Templates Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="windows.html" />
    
    
    <link rel="prev" href="settings.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">UCS Developer Resources</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../API.html">
            
                <a href="../../API.html">
            
                    
                    UCS API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../PROGRAMMING.html">
            
                <a href="../../PROGRAMMING.html">
            
                    
                    Programming Languages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../CFGMGMT.html">
            
                <a href="../../CFGMGMT.html">
            
                    
                    Configuration Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../OS/">
            
                <a href="../../OS/">
            
                    
                    Operating Systems
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="../../OS/COREOS.html">
            
                <a href="../../OS/COREOS.html">
            
                    
                    CoreOS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.2" data-path="../../OS/REDHAT.html">
            
                <a href="../../OS/REDHAT.html">
            
                    
                    RedHat
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../../CONTAINERS/">
            
                <a href="../../CONTAINERS/">
            
                    
                    Containers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../../SUPPORT.html">
            
                <a href="../../SUPPORT.html">
            
                    
                    Support
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">KUBAM</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../">
            
                <a href="../">
            
                    
                    KUBAM Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../installation/">
            
                <a href="../installation/">
            
                    
                    Installation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.2.1" data-path="../installation/standard.html">
            
                <a href="../installation/standard.html">
            
                    
                    Standard CentOS/RedHat Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.2" data-path="../installation/ubuntu.html">
            
                <a href="../installation/ubuntu.html">
            
                    
                    Standard Ubuntu Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.3" data-path="../installation/source.html">
            
                <a href="../installation/source.html">
            
                    
                    VM based Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.4" data-path="../installation/security.html">
            
                <a href="../installation/security.html">
            
                    
                    Security
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.5" data-path="../installation/network.html">
            
                <a href="../installation/network.html">
            
                    
                    Networking
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2.6" data-path="../installation/other.html">
            
                <a href="../installation/other.html">
            
                    
                    Other Tricky Installation Tips
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="./">
            
                <a href="./">
            
                    
                    Configuration
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="creds.md">
            
                <span>
            
                    
                    Credentials
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.2" data-path="network.md">
            
                <span>
            
                    
                    Networking
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.3" data-path="servers.md">
            
                <span>
            
                    
                    Servers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.4" data-path="iso.md">
            
                <span>
            
                    
                    Boot Images
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.5" data-path="settings.html">
            
                <a href="settings.html">
            
                    
                    Settings
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="3.3.6" data-path="template.html">
            
                <a href="template.html">
            
                    
                    Kickstart Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.7" data-path="windows.html">
            
                <a href="windows.html">
            
                    
                    Windows vMedia Method (WIP)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.8" data-path="windows2.html">
            
                <a href="windows2.html">
            
                    
                    Windows vMedia/Network Method (WIP)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../internals/">
            
                <a href="../internals/">
            
                    
                    KUBAM Glorious Underbelly
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.4.1" data-path="../internals/stage1/docker.html">
            
                <a href="../internals/stage1/docker.html">
            
                    
                    Stage1 - Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.2" data-path="../internals/stage1/esxi.html">
            
                <a href="../internals/stage1/esxi.html">
            
                    
                    Stage1 - ESXi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.3" data-path="../internals/stage1/manual.html">
            
                <a href="../internals/stage1/manual.html">
            
                    
                    Stage1 - Manual
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.4" data-path="../internals/stage2/python.html">
            
                <a href="../internals/stage2/python.html">
            
                    
                    Stage2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.5" data-path="../internals/stage3/ansible.html">
            
                <a href="../internals/stage3/ansible.html">
            
                    
                    Stage3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.6" data-path="../internals/stage4/manual.html">
            
                <a href="../internals/stage4/manual.html">
            
                    
                    Stage4
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../developer/">
            
                <a href="../developer/">
            
                    
                    KUBAM Developer
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.5.1" data-path="../developer/API.html">
            
                <a href="../developer/API.html">
            
                    
                    KUBAM API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.2" data-path="../developer/APIGUIDE.html">
            
                <a href="../developer/APIGUIDE.html">
            
                    
                    KUBAM API Walkthrough
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.3" data-path="../developer/YAML.html">
            
                <a href="../developer/YAML.html">
            
                    
                    KUBAM YAML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >Kickstart Templates</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="kickstart-templates">Kickstart Templates</h1>
<p>KUBAM uses <a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/installation_guide/s1-kickstart2-file" target="_blank">kickstart</a> for automated installs for RedHat and VMware ESXi.  Further supported operating systems will also use the native automated answer file for rapid installation. </p>
<p>The current default kickstart templates are found in the <a href="https://github.com/CiscoUcs/KUBaM/tree/master/kubam/templates" target="_blank">KUBAM source repository</a>.  These templates are copied into the container in the <code>/usr/share/kubam/templates</code> directory.  </p>
<h2 id="kickstart-templates">Kickstart Templates</h2>
<p>The kickstart template allows for a blueprint of multiple unique kickstart files for each server.  In this way every server receives its unique installation file.  This is important as each node has something unique about it including <code>hostname</code>, <code>ip address</code>, or different role type.  </p>
<p>KUBAM uses the <a href="http://jinja.pocoo.org/docs/2.10/" target="_blank">Jinja2</a>
 framework and automiatically populates the fields based on predefined keywords.  </p>
<h2 id="kubam-template-key-words">KUBAM Template Key words</h2>
<p>The following jinja2 variables found in a kickstart file will be automatically filled: </p>
<ul>
<li><code> </code></li>
<li><code>\</code></li>
<li><code>{\{ gateway }}</code></li>
<li><code> </code></li>
<li><code> </code> - The hostname of the server, not the FQDN.</li>
<li><code> </code> - A list of public keys authorized to log into this server. </li>
<li><code>\{\{ proxy \}\}</code> - A proxy server if the machine is behind a firewall.  This can be used in post scripts. </li>
</ul>
<h2 id="workflow">Workflow</h2>
<p>The default workflow is that when a user selects <strong>Generate Boot Images</strong> from the GUI the kickstart template pertaining to the OS image is filled in with all the specific nodes to be deployed.  This file is copied into a <a href="https://github.com/CiscoUcs/KUBaM/blob/master/kubam/files/stage1/ks.img" target="_blank">1MB disk image</a>  that comes with KUBAM.  The disk image is written to the <code>/kubam</code> directory as the name <code>&lt;nodename&gt;.img</code>.  One image is written for each node to be deployed.  This image is unique to each server. </p>
<h3 id="post-installation">Post installation</h3>
<p>Inside each kickstart image is a series of steps to guide in post installation tasks.  For Kubernetes there is a way that looks at the different roles of a node.  If the node is a kubernetes master node, a generic node, or a kubernetes worker node, then the post installation scripts do something different. </p>
<p>In the case of kubernetes nodes, it pulls a zip file found in <code>~/kubam/post/</code> which contains ansible instructions for deploying Kubernetes.  For generic nodes this step is omitted. </p>
<h2 id="customizing-kickstart-files">Customizing Kickstart Files</h2>
<p>Most likely you will not want to use the default kickstart file as you will have ideas of how things are to be instaleld.  </p>
<p>To use your own template put a template file of the same name as the kubam templates in the <code>~/kubam</code> directory.  For example, suppose I was installing CentOS 7.4.  I would then create the file <code>~/kubam/centos7.4.tmpl</code>.  When KUBAM goes to build the image it will see this file is in place and use it instead of the default.  </p>
<h3 id="checking-the-custom-file">Checking The Custom File</h3>
<p>You are responsible for ensuring the kickstart template you provide is correct as KUBAM does no error checking.  To verify that the image you want is built, after the image is created you can check by viewing the file in the <code>&lt;nodename&gt;.img</code> image. </p>
<p>For example, suppose my server that I was deploying was named <code>supernode01</code>.  After building the deployment files, the file <code>supernode01.img</code> would be created in the <code>~/kubam</code> directory.  To view that this image uses our new custom kickstart template we would do:</p>
<pre><code>mkdir tmp1
mount -o loop supernode01.img tmp1
</code></pre><p>Peaking inside the <code>tmp1</code> directory you will see a file called <code>ks.cfg</code>.  You should verify that this file uses the templated file in the <code>~/kubam</code> directory that you used.  </p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="settings.html" class="navigation navigation-prev " aria-label="Previous page: Settings">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="windows.html" class="navigation navigation-next " aria-label="Next page: Windows vMedia Method (WIP)">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Kickstart Templates","level":"3.3.6","depth":2,"next":{"title":"Windows vMedia Method (WIP)","level":"3.3.7","depth":2,"path":"kubam/configure/windows.md","ref":"kubam/configure/windows.md","articles":[]},"previous":{"title":"Settings","level":"3.3.5","depth":2,"path":"kubam/configure/settings.md","ref":"kubam/configure/settings.md","articles":[]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"kubam/configure/template.md","mtime":"2018-03-19T16:48:11.938Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2018-05-11T12:09:58.497Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

