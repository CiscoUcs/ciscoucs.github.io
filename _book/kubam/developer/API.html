
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>KUBAM API Â· GitBook</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="APIGUIDE.html" />
    
    
    <link rel="prev" href="./" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">UCS Developer Resources</li>
        
        
    
        <li class="chapter " data-level="2.1" data-path="../../API.html">
            
                <a href="../../API.html">
            
                    
                    UCS API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="../../PROGRAMMING.html">
            
                <a href="../../PROGRAMMING.html">
            
                    
                    Programming Languages
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="../../CFGMGMT.html">
            
                <a href="../../CFGMGMT.html">
            
                    
                    Configuration Management
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="../../OS/">
            
                <a href="../../OS/">
            
                    
                    Operating Systems
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.4.1" data-path="../../OS/COREOS.html">
            
                <a href="../../OS/COREOS.html">
            
                    
                    CoreOS
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.2" data-path="../../OS/REDHAT.html">
            
                <a href="../../OS/REDHAT.html">
            
                    
                    RedHat
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.4.3" data-path="../../OS/UBUNTU.html">
            
                <a href="../../OS/UBUNTU.html">
            
                    
                    Ubuntu
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="../../CONTAINERS/">
            
                <a href="../../CONTAINERS/">
            
                    
                    Containers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="../../SUPPORT.html">
            
                <a href="../../SUPPORT.html">
            
                    
                    Support
            
                </a>
            

            
        </li>
    

    
        
        <li class="header">KUBAM</li>
        
        
    
        <li class="chapter " data-level="3.1" data-path="../">
            
                <a href="../">
            
                    
                    KUBAM Overview
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="../RELEASE.html">
            
                <a href="../RELEASE.html">
            
                    
                    Release Notes
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3" data-path="../installation/">
            
                <a href="../installation/">
            
                    
                    Installation
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.3.1" data-path="../installation/standard.html">
            
                <a href="../installation/standard.html">
            
                    
                    Standard CentOS/RedHat Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.2" data-path="../installation/ubuntu.html">
            
                <a href="../installation/ubuntu.html">
            
                    
                    Standard Ubuntu Installation
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.3" data-path="../installation/network.html">
            
                <a href="../installation/network.html">
            
                    
                    Networking
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.3.4" data-path="../installation/other.html">
            
                <a href="../installation/other.html">
            
                    
                    Other Tricky Installation Tips
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.4" data-path="../configure/">
            
                <a href="../configure/">
            
                    
                    Configuration
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.4.1" data-path="../configure/creds.md">
            
                <span>
            
                    
                    Credentials
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.2" data-path="../configure/network.md">
            
                <span>
            
                    
                    Networking
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.3" data-path="../configure/servers.md">
            
                <span>
            
                    
                    Servers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.4" data-path="../configure/iso.md">
            
                <span>
            
                    
                    Boot Images
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.5" data-path="../configure/settings.html">
            
                <a href="../configure/settings.html">
            
                    
                    Settings
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.6" data-path="../configure/template.html">
            
                <a href="../configure/template.html">
            
                    
                    Kickstart Templates
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.7" data-path="../configure/windows.html">
            
                <a href="../configure/windows.html">
            
                    
                    Windows vMedia Method (WIP)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.4.8" data-path="../configure/windows2.html">
            
                <a href="../configure/windows2.html">
            
                    
                    Windows vMedia/Network Method (WIP)
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.5" data-path="../internals/">
            
                <a href="../internals/">
            
                    
                    KUBAM Glorious Underbelly
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.5.1" data-path="../internals/stage1/docker.html">
            
                <a href="../internals/stage1/docker.html">
            
                    
                    Stage1 - Docker
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.2" data-path="../internals/stage1/esxi.html">
            
                <a href="../internals/stage1/esxi.html">
            
                    
                    Stage1 - ESXi
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.3" data-path="../internals/stage1/manual.html">
            
                <a href="../internals/stage1/manual.html">
            
                    
                    Stage1 - Manual
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.4" data-path="../internals/stage2/python.html">
            
                <a href="../internals/stage2/python.html">
            
                    
                    Stage2
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.5" data-path="../internals/stage3/ansible.html">
            
                <a href="../internals/stage3/ansible.html">
            
                    
                    Stage3
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.5.6" data-path="../internals/stage4/manual.html">
            
                <a href="../internals/stage4/manual.html">
            
                    
                    Stage4
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3.6" data-path="./">
            
                <a href="./">
            
                    
                    KUBAM Developer
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="3.6.1" data-path="API.html">
            
                <a href="API.html">
            
                    
                    KUBAM API
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.2" data-path="APIGUIDE.html">
            
                <a href="APIGUIDE.html">
            
                    
                    KUBAM API Walkthrough
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="3.6.3" data-path="YAML.html">
            
                <a href="YAML.html">
            
                    
                    KUBAM YAML
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >KUBAM API</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="kubam-api">KUBAM API</h1>
<p>KUBAM is developed API first!  The GUI is just a front end and calls the API when updating parts of it. </p>
<p>The entire API is a python flask application and commands can be seen in the <a href="https://github.com/CiscoUcs/KUBaM/blob/master/kubam/app/app.py" target="_blank">code itself.</a></p>
<h2 id="status">Status</h2>
<p>Simple API to check it the service is still alive.</p>
<h3 id=""><code>/</code></h3>
<ul>
<li><code>GET</code> returns <code>{ &quot;status&quot; : &quot;ok&quot;}</code> if the service is up. </li>
</ul>
<h2 id="settings">Settings</h2>
<h3 id="apiv1ip"><code>/api/v1/ip</code></h3>
<p>Set the IP address of the boot server.  Usually this is just the KUBAM server. This is so the nodes where to get install media when they boot up.  KUBAM also uses this to set the vmedia policy to connect to this IP address. </p>
<ul>
<li><code>POST</code><ul>
<li>Example</li>
</ul>
</li>
</ul>
<pre><code>```
curl -X POST -H &quot;Content-Type: application/json&quot; -d &apos;{ &quot;kubam_ip&quot;: &quot;10.93.234.96&quot; }&apos; $KUBAM_API/api/v1/ip
```
</code></pre><h3 id="apiv1keys"><code>/api/v1/keys</code></h3>
<ul>
<li><p><code>GET</code> - Returns a list of the Public SSH Keys that have been entered into KUBAM.  These keys are ones that hosts can use to ssh into the servers installed by KUBAM. </p>
<ul>
<li><p>Example:</p>
<pre><code>curl $KUBAM_API/api/v1/keys
{
&quot;keys&quot;: [
&quot;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCc/7HrOIZB2wk8FvmZXzLMS1ZJ8TvS9OWBf5xosp59NRvcAbwbclLRD2f9z5KvOF1n5a4mK03OetymTQQX08rBpZJZ5ZWztdjiFjIce6rm7V87CRjeuwa97XyhacKx98QcijOJWBbLf1TE/cRd8KVopfG/RPZeMMx1n3J071QRiVhbHEzVw3xuY4KruIb/2kLGHEyYqtx//y8c3k6UaMF180nOIaq6WBZVHnpYXZZ+EkolpJ+10objpueuWPcJe4OU7AIRP1JGsaDHrmXNoy9ygeWceSqOIqRLOdPneHtC6xU78t3ttpnRdC9OgtawIVqaq0wpvd7G0sQ7Jv2DO2hZ\n&quot;
]
}
</code></pre></li>
</ul>
</li>
<li><p><code>POST</code> - Add or change public keys.  The keys are a list of Public ssh keys. KUBAM uses these keys to allow nodes to be accessed by these keys when installed.  </p>
<ul>
<li><p>Params: </p>
<pre><code>{&quot;keys&quot; : [
&quot;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCc/7HrOIZB2wk8FvmZXzLMS1ZJ8TvS9OWBf5xosp59NRvcAbwbclLRD2f9z5KvOF1n5a4mK03OetymTQQX08rBpZJZ5ZWztdjiFjIce6rm7V87CRjeuwa97XyhacKx98QcijOJWBbLf1TE/cRd8KVopfG/RPZeMMx1n3J071QRiVhbHEzVw3xuY4KruIb/2kLGHEyYqtx//y8c3k6UaMF180nOIaq6WBZVHnpYXZZ+EkolpJ+10objpueuWPcJe4OU7AIRP1JGsaDHrmXNoy9ygeWceSqOIqRLOdPneHtC6xU78t3ttpnRdC9OgtawIVqaq0wpvd7G0sQ7Jv2DO2hZ&quot;, 
&quot;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCd2XeDE/Ev5TJxBRAmrsTglAQQG8v5JZ8VoOUdSBUCONcJilcERdpOtGOgJR4t1xr2r0G3oDZrRGEaS5/Kjo91/LIxOR01aUgNb6zFkrSdlu8ktBmLsEvocG68di3GGG9JqoICL8CoPLkRDWGcBO3GKhOEd0TEK1hwUeGOX0NBMBERQtGXPiHq4tXvoUSyzsUSdAKypfRlKJgCETG9muGmHAtF1Z5pJXq8BqiiZ/GKm8Z6R60Z8hEQnNzIySyUHp1J6wvgnsZAVrUSMTclQ8NBrnagLVPToU5SI2zXGdiVIPh9enda+warwF5TuW80EABCbEIUtbqwde2nbqIlQOP5&quot;
]}
</code></pre></li>
<li><p>Example:</p>
<pre><code>  curl -X POST -d &apos;{&quot;keys&quot; : [ &quot;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQCc/7HrOIZB2wk8FvmZXzLMS1ZJ8TvS9OWBf5xosp59NRvcAbwbclLRD2f9z5KvOF1n5a4mK03OetymTQQX08rBpZJZ5ZWztdjiFjIce6rm7V87CRjeuwa97XyhacKx98QcijOJWBbLf1TE/cRd8KVopfG/RPZeMMx1n3J071QRiVhbHEzVw3xuY4KruIb/2kLGHEyYqtx//y8c3k6UaMF180nOIaq6WBZVHnpYXZZ+EkolpJ+10objpueuWPcJe4OU7AIRP1JGsaDHrmXNoy9ygeWceSqOIqRLOdPneHtC6xU78t3ttpnRdC9OgtawIVqaq0wpvd7G0sQ7Jv2DO2hZ&quot;]}&apos; -H &quot;Content-Type: application/json&quot; $KUBAM_API/api/v1/keys
</code></pre></li>
</ul>
</li>
</ul>
<h2 id="monitor">Monitor</h2>
<h3 id="apiv2fsm"><code>/api/v2/fsm</code></h3>
<ul>
<li><p><code>GET</code> Get the current detailed status of all finite state machines (FSM) stages given server based on the passed parameters.</p>
<ul>
<li><p>examples: </p>
<pre><code>curl -X GET -d &apos;{&quot;servers&quot;: {&quot;blades&quot;: [&quot;1/3&quot;], &quot;rack_servers&quot; : [&quot;1&quot;]}}&apos; -H &quot;Content-Type: application/json&quot; $KUBAM_API/api/v2/servers/kube-group1/fsm
</code></pre></li>
</ul>
</li>
</ul>
<pre><code>curl -X GET -d &apos;{&quot;servers&quot;: {&quot;blades&quot;: [&quot;1/3&quot;]}}&apos; -H &quot;Content-Type: application/json&quot; $KUBAM_API/api/v2/servers/kube-group1/fsm
</code></pre><pre><code> curl -X GET -d &apos;{&quot;servers&quot;: {&quot;blades&quot;: [&quot;1009/1/3&quot;]}}&apos; -H &quot;Content-Type: application/json&quot; $KUBAM_API/api/v2/servers/pdx-central/fsm
</code></pre><pre><code>* Returns: 
</code></pre><pre><code>{
    &quot;stages&quot;: [
        {
            &quot;descr&quot;: &quot;Check if power can be allocated to server 1(FSM-STAGE:sam:dme:ComputePhysicalTurnup:CheckPowerAvailability)&quot;,
            &quot;last_update_time&quot;: &quot;2018-04-09T10:42:11.093&quot;,
            &quot;name&quot;: &quot;TurnupCheckPowerAvailability&quot;,
            &quot;order&quot;: &quot;1&quot;,
            &quot;retry&quot;: &quot;0&quot;,
            &quot;stage_status&quot;: &quot;skip&quot;
        },
        {
            &quot;descr&quot;: &quot;Waiting for power allocation to server 1(FSM-STAGE:sam:dme:ComputePhysicalTurnup:PowerDeployWait)&quot;,
            &quot;last_update_time&quot;: &quot;2018-04-09T10:42:11.093&quot;,
            &quot;name&quot;: &quot;TurnupPowerDeployWait&quot;,
            &quot;order&quot;: &quot;2&quot;,
            &quot;retry&quot;: &quot;0&quot;,
            &quot;stage_status&quot;: &quot;skip&quot;
        },
        {
            &quot;descr&quot;: &quot;Power-on server sys/rack-unit-1(FSM-STAGE:sam:dme:ComputePhysicalTurnup:Execute)&quot;,
            &quot;last_update_time&quot;: &quot;2018-04-09T10:42:11.670&quot;,
            &quot;name&quot;: &quot;TurnupExecute&quot;,
            &quot;order&quot;: &quot;3&quot;,
            &quot;retry&quot;: &quot;1&quot;,
            &quot;stage_status&quot;: &quot;success&quot;
        }
    ]
}
</code></pre><h2 id="iso-images">ISO Images</h2>
<h3 id="apiv1catalog"><code>/api/v1/catalog</code></h3>
<ul>
<li><code>GET</code></li>
</ul>
<h3 id="apiv1isos"><code>/api/v1/isos</code></h3>
<ul>
<li><code>GET</code>  Gets the current ISO files that exist in the <code>/kubam/</code> directory.  <ul>
<li>Example: </li>
</ul>
</li>
</ul>
<pre><code>curl http://10.93.234.96:8001/api/v1/isos

{
  &quot;isos&quot;: [
    &quot;CentOS-7-x86_64-Minimal-1708.iso&quot;
  ]
}
</code></pre><h3 id="apiv1isosmap"><code>/api/v1/isos/map</code></h3>
<p>We Map the file of the operating system to the name of what operating system it is.  We are not smart enough to figure it out in code at this time.  Actually, we are just a little lazy. </p>
<ul>
<li><code>GET</code> Gets the current Mapping of OS name to OS iso files.  These are OSes that can be deployed. <ul>
<li>Parameters:  None</li>
<li>Example:</li>
</ul>
</li>
</ul>
<pre><code>curl http://10.93.234.96:8001/api/v1/isos/map

{
  &quot;iso_map&quot;: [
    {
      &quot;file&quot;: &quot;/kubam/CentOS-7-x86_64-Minimal-1708.iso&quot;,
      &quot;os&quot;: &quot;centos7.4&quot;
    }
  ]
}
</code></pre><ul>
<li><code>POST</code> Maps all ISOS to files.  You should include all previously mapped ISO maps in this request if you want to add one.  KUBAM expects all ISO files to be in the <code>/kubam/</code> directory of the container.  (this directory is mounted when KUBAM starts from something like <code>/root/kubam</code>.  <ul>
<li>Parameters: Should be a map of all the isos in the file to the name of the operating systems. </li>
</ul>
</li>
</ul>
<pre><code>{
      &quot;iso_map&quot;: [
        {
              &quot;file&quot;: &quot;/kubam/CentOS-7-x86_64-Minimal-1708.iso&quot;,
              &quot;os&quot;: &quot;centos7.4&quot;
        },
        {...
        },
      ]
}
</code></pre><ul>
<li>Example:</li>
</ul>
<pre><code>curl -X POST $KUBAM_API/api/v1/isos/map \
    -d &apos;{&quot;iso_map&quot; : [{&quot;os&quot; : &quot;centos7.4&quot;, &quot;file&quot; : &quot;/kubam/CentOS-7-x86_64-Minimal-1708.iso&quot;}]}&apos; \
    -H &quot;Content-Type: application/json&quot;

{
  &quot;iso_map&quot;: [
    {
      &quot;file&quot;: &quot;/kubam/CentOS-7-x86_64-Minimal-1708.iso&quot;,
      &quot;os&quot;: &quot;centos7.4&quot;
    }
  ]
}
</code></pre><h2 id="server-groups">Server Groups</h2>
<p>KUBAM stores values for UCS logins inside the <code>kubam.yaml</code> This API just offers a way to make this happen.  </p>
<h3 id="apiv2servers"><code>/api/v2/servers</code></h3>
<ul>
<li><p><code>GET</code>: Get the current server groups</p>
<ul>
<li>Parameters: None</li>
<li><p>Returns: The current server groups without the password.  It doesn&apos;t return all information, just the essential user information. </p>
<pre><code>{
    &quot;server-groups&quot;: [
      {&quot;uid&quot;: 1, &quot;name&quot; : &quot;ucs01&quot;, &quot;type&quot;: &quot;ucsm&quot;, &quot;credentials&quot; : {&quot;ip&quot; : &quot;192.168.40.1&quot;, &quot;user&quot; : &quot;admin&quot;, &quot;password&quot; : &quot;encrypted&quot;},
      {&quot;name&quot; : &quot;ucs02&quot;, &quot;type&quot;: &quot;ucsm&quot;, &quot;credentials&quot; : {&quot;ip&quot; : &quot;192.168.40.20&quot;, &quot;user&quot; : &quot;admin&quot;, &quot;password&quot; : &quot;encrypted&quot;}
    ]
}
</code></pre></li>
<li>Example:
<code>curl $KUBAM_API/api/v2/servers</code></li>
</ul>
</li>
</ul>
<ul>
<li><p><code>POST</code> - Create a new Server group</p>
<ul>
<li><p>Params: </p>
<pre><code>{&quot;name&quot;, &quot;ucs01&quot;, &quot;type&quot; : &quot;ucsm&quot;, &quot;credentials&quot; : {&quot;user&quot;: &quot;admin&quot;, &quot;password&quot; : &quot;secret-password&quot;, &quot;ip&quot; : &quot;172.28.225.163&quot; }}
</code></pre></li>
<li><h4 id="ucs-example">UCS Example:</h4>
<p>   Add a new UCS Manager Domain to the database</p>
<pre><code>   curl -X POST -H &quot;Content-Type: application/json&quot; -d &apos;{&quot;credentials&quot; : {&quot;user&quot;: &quot;admin&quot;, &quot;password&quot; : &quot;nbv12345&quot;, &quot;ip&quot; : &quot;172.28.225.163&quot; }, &quot;type&quot; : &quot;ucsm&quot;, &quot;name&quot; : &quot;devi&quot; }&apos; http://$KUBAM_API/api/v2/servers
</code></pre><ul>
<li><h4 id="ucs-imc-stand-alone-example">UCS IMC Stand Alone Example</h4>
<p>   Add a new C-Series server to the database. </p>
<pre><code>   curl -X POST -H &quot;Content-Type: application/json&quot; -d &apos;{&quot;credentials&quot; : {&quot;user&quot;: &quot;admin&quot;, &quot;password&quot; : &quot;C1sco1234&quot;, &quot;ip&quot; : &quot;10.93.130.90&quot; }, &quot;type&quot; : &quot;imc&quot;, &quot;name&quot; : &quot;LK02-C220-M3-R5-RU11&quot; }&apos; http://$KUBAM_API/api/v2/servers
</code></pre></li>
</ul>
</li>
</ul>
</li>
<li><p><code>PUT</code> - Update an existing UCS Domain.  You need to include the UUID of the Domain. Otherwise its the same action as <code>POST</code>. </p>
</li>
<li><code>DELETE</code> - Delete the UCS / CIMC Server Group.  <ul>
<li>Parameters: <code>{&quot;name&quot; : &quot;asdfbasdf...&quot;}</code></li>
<li>Example: <code>curl -X DELETE -H &quot;Content-Type: application/json&quot;  -d &apos;{&quot;name&quot; : &quot;net1&quot;}&apos; $KUBAM_API/api/v2/servers</code></li>
</ul>
</li>
</ul>
<h3 id="apiv2serversservergroupservers"><code>/api/v2/servers/&lt;server_group&gt;/servers</code></h3>
<p>Gets the compute resources of a server group or updates the servers. </p>
<ul>
<li><pre><code class="lang-GET```">  * Example: ```curl $KUBAM_API/api/v2/servers/UCS01/servers
</code></pre>
<ul>
<li><p>Output: </p>
<pre><code>{
    &quot;servers&quot;: [
    {
        &quot;association&quot;: &quot;associated&quot;,
        &quot;chassis_id&quot;: &quot;1&quot;,
        &quot;dn&quot;: &quot;sys/chassis-1/blade-8&quot;,
        &quot;label&quot;: &quot;kubam - master&quot;,
        &quot;model&quot;: &quot;UCSB-B200-M3&quot;,
        &quot;num_cores&quot;: &quot;12&quot;,
        &quot;num_cpus&quot;: &quot;2&quot;,
        &quot;oper_power&quot;: &quot;on&quot;,
        &quot;ram&quot;: &quot;262144&quot;,
        &quot;ram_speed&quot;: &quot;1333&quot;,
        &quot;service_profile&quot;: &quot;org-root/org-devi/ls-devi1&quot;,
        &quot;slot&quot;: &quot;8&quot;,
        &quot;type&quot;: &quot;blade&quot;
    },
  ... 
  ]
}
</code></pre></li>
</ul>
</li>
<li><pre><code class="lang-POST```">  * Example: Update the selected hosts with blades 1/2 and 1/3 and with rack mount servers 6 and 7.
</code></pre>
<p>  curl -X POST -d &apos;{&quot;servers&quot; : {&quot;blades&quot; : [&quot;1/1&quot;, &quot;1,2&quot;], &quot;rack&quot;: [&quot;6&quot;, &quot;7&quot;]}}&apos; -H &quot;Content-Type: application/json&quot; $KUBAM_API/api/v2/servers/kube-group1/servers</p>
<pre><code>  ```
</code></pre></li>
</ul>
<h3 id="apiv2serversservergrouppowerpower-action"><code>/api/v2/servers/&lt;server_group&gt;/power/&lt;power-action&gt;</code></h3>
<p>These methods change the power cycle of the server</p>
<ul>
<li><p><code>PUT</code> - change the power cycle of a server.  The methods that are allowed are: </p>
<ul>
<li><code>on</code></li>
<li><code>off</code></li>
<li><code>hardreset</code></li>
<li><p><code>softreset</code></p>
</li>
<li><p>Example: </p>
<pre><code>curl -X PUT -d &apos;{&quot;servers&quot; : {&quot;blades&quot; : [&quot;1/3&quot;], &quot;rack_servers&quot; : [&quot;1&quot;]}}&apos; -H &quot;Content-Type: application/json&quot; $KUBAM_API/api/v2/servers/kube-group1/power/on
</code></pre></li>
<li><p>Example Output: </p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;status&quot;</span>: {
         <span class="hljs-string">&quot;blades&quot;</span>: [
            <span class="hljs-string">&quot;1/3: off&quot;</span>
      ],
      <span class="hljs-string">&quot;rack_servers&quot;</span>: [
            <span class="hljs-string">&quot;1: off&quot;</span>
      ]
    }
}
</code></pre>
</li>
<li><p>Example (UCS Central):</p>
<pre><code>curl -X PUT -d &apos;{&quot;servers&quot; : {&quot;blades&quot; : [&quot;1009/1/1&quot;] }}&apos; -H &quot;Content-Type: application/json&quot; $KUBAM_API/api/v2/servers/drury-central/power/on
</code></pre><p><strong>(Note: it takes a little bit for the status to change from off to on.)</strong></p>
</li>
</ul>
</li>
</ul>
<h3 id="apiv2serversservergrouppowerstat"><code>/api/v2/servers/&lt;server_group&gt;/powerstat</code></h3>
<ul>
<li><p><code>GET</code> - Returns the power status of a server.</p>
<ul>
<li>Example:<pre><code>curl -X GET -d &apos;{&quot;servers&quot;: {&quot;blades&quot;: [&quot;1/3&quot;], &quot;rack_servers&quot; : [&quot;1&quot;]}}&apos; -H &quot;Content-Type: application/json&quot; $KUBAM_API/api/v2/servers/kube-group1/powerstat
</code></pre></li>
<li><p>Example Output:</p>
<pre><code class="lang-json">{
    <span class="hljs-string">&quot;status&quot;</span>: {
      <span class="hljs-string">&quot;blades&quot;</span>: [
            <span class="hljs-string">&quot;1/3: on&quot;</span>
      ],
      <span class="hljs-string">&quot;rack_servers&quot;</span>: [
            <span class="hljs-string">&quot;1: on&quot;</span>
      ]
    }
}
</code></pre>
</li>
<li><p>Example: You can also get all the servers by not passing in any arguments</p>
<pre><code>curl $KUBAM_API/api/v2/servers/kube-group1/powerstat
</code></pre></li>
</ul>
</li>
</ul>
<h3 id="apiv2servergroupdisks"><code>/api/v2/&lt;server_group&gt;/disks</code></h3>
<h4 id="get---get-the-disks-of-a-server"><code>GET</code> - Get the disks of a server</h4>
<ul>
<li>Example: </li>
</ul>
<pre><code>curl -X GET -d &apos;{&quot;servers&quot;: {&quot;blades&quot;: [&quot;1/3&quot;], &quot;rack_servers&quot; : [&quot;1&quot;]}}&apos; -H &quot;Content-Type: application/json&quot; $KUBAM_API/api/v2/servers/kube-group1/disks
</code></pre><ul>
<li>UCS Central Example</li>
</ul>
<pre><code>curl -X GET -d &apos;{&quot;servers&quot;: {&quot;blades&quot;: [&quot;109/1/3&quot;]}}&apos; -H &quot;Content-Type: application/json&quot; $KUBAM_API/api/v2/servers/pdx-central/disks
</code></pre><h4 id="delete---reset-the-disks-of-servers-to-unconfigured-good"><code>DELETE</code> - Reset the disks of servers to unconfigured Good.</h4>
<ul>
<li>Example: </li>
</ul>
<pre><code>curl -X DELETE -d &apos;{&quot;servers&quot;: {&quot;blades&quot;: [&quot;1/3&quot;], &quot;rack_servers&quot; : [&quot;1&quot;]}}&apos; -H &quot;Content-Type: application/json&quot; $KUBAM_API/api/v2/servers/kube-group1/disks
</code></pre><h3 id="apiv2servergroupdeploy"><code>/api/v2/&lt;server_group&gt;/deploy</code></h3>
<p>Deploy the UCS Service Profiles</p>
<ul>
<li><code>POST</code></li>
</ul>
<h3 id="apiv2servergroupvmedia"><code>/api/v2/&lt;server_group&gt;/vmedia</code></h3>
<ul>
<li><code>POST</code>: Deploys a VMedia policy only that can be used by existing Service Profiles. </li>
</ul>
<h3 id="apiv2serversservergrouptemplates"><code>/api/v2/servers/&lt;server_group&gt;/templates</code></h3>
<ul>
<li><code>GET</code>: Get all Service Profile templates in the UCS Manager or UCS Central server group. </li>
</ul>
<h2 id="aci">ACI</h2>
<h3 id="apiv2aci"><code>/api/v2/aci</code></h3>
<ul>
<li><p><code>GET</code>: Get all ACI instances.  If there are any there will probably only be one. </p>
<ul>
<li>Params: <code>none</code></li>
</ul>
</li>
<li><p><code>POST</code>: Create a new ACI instance</p>
<ul>
<li>Params: <code>{&apos;name&apos;: &apos;aci01&apos;, &apos;credentials&apos; : {&quot;ip&quot; : &quot;foo&quot;, &quot;user&quot; : &quot;admin&quot;, &quot;password&quot; : &quot;password&quot;}, &quot;tenant_name&quot; : &quot;blue&quot;, &quot;vrf_name&quot; : &quot;lagoon&quot;, &quot;bridge_domain&quot; : &quot;3&quot;}</code></li>
<li>Example: <code>curl -X POST -H &quot;Content-Type: application/json&quot; -d &apos;{&quot;name&quot;: &quot;aci01&quot;, &quot;credentials&quot; : {&quot;ip&quot; : &quot;foo&quot;, &quot;user&quot; : &quot;admin&quot;, &quot;password&quot; : &quot;password&quot;}, &quot;tenant_name&quot; : &quot;blue&quot;, &quot;vrf_name&quot; : &quot;lagoon&quot;, &quot;bridge_domain&quot; : &quot;3&quot;}&apos; $KUBAM_API/api/v2/aci</code></li>
</ul>
</li>
<li><p><code>PUT</code>: Update an existing ACI instance</p>
<ul>
<li>Params: <code>{&quot;id&quot;: &quot;someid...&quot;, &quot;name&quot;: &quot;aci01&quot;, &quot;credentials&quot; : {&quot;ip&quot; : &quot;foo&quot;, &quot;user&quot; : &quot;admin&quot;, &quot;password&quot; : &quot;password&quot;}, &quot;tenant_name&quot; : &quot;blue&quot;, &quot;vrf_name&quot; : &quot;lagoon&quot;, &quot;bridge_domain&quot; : &quot;3&quot;}</code></li>
<li>Example: <code>curl -X PUT -H &quot;Content-Type: application/json&quot; -d &apos;{&quot;id&quot;: &quot;blahblah&quot;, &quot;name&quot;: &quot;aci0-different&quot;, &quot;credentials&quot; : {&quot;ip&quot; : &quot;foo&quot;, &quot;user&quot; : &quot;admin&quot;, &quot;password&quot; : &quot;password&quot;}, &quot;tenant_name&quot; : &quot;blue&quot;, &quot;vrf_name&quot; : &quot;lagoon&quot;, &quot;bridge_domain&quot; : &quot;3&quot;}&apos; $KUBAM_API/api/v2/aci</code></li>
</ul>
</li>
<li><p><code>DELETE</code>: Delete an existing ACI group</p>
<ul>
<li>Params: <code>{&quot;id&quot;: &quot;acigroupid&quot;}</code></li>
<li>Example <code>curl -X DELETE -H &quot;Content-Type: application/json&quot; -d &apos;{&quot;name&quot;: &quot;blahblah&quot;} $KUBAM_API/api/v2/aci</code></li>
</ul>
</li>
</ul>
<h2 id="network-group">Network Group</h2>
<h3 id="apiv2networks"><code>/api/v2/networks</code></h3>
<p>Network parameters are clustered together that can then be added to a server.  </p>
<ul>
<li><p><code>GET</code>: Get all network settings.</p>
<ul>
<li>Params: <code>none</code></li>
<li>Example:  <code>curl -X GET $KUBAM_API/api/v2/networks</code></li>
<li><p>Returns:  The current list of network groups</p>
<pre><code>{ &quot;networks&quot; : 
  [
  {&quot;id&quot;: &quot;1234-2342-1234-1234-1234&quot;,
  &quot;name&quot;: &quot;net01&quot;, 
  &quot;netmask&quot;:&quot;255.255.255.0&quot;, 
  &quot;gateway&quot; : &quot;192.168.1.1&quot;, 
  &quot;nameserver&quot; : &quot;8.8.8.8&quot;, 
  &quot;ntpserver&quot; : &quot;ntp.esl.cisco.com&quot;},

  {&quot;id&quot;: &quot;1234-2342-1234-1234-1234&quot;,
  &quot;name&quot;: &quot;net02&quot;, 
  &quot;netmask&quot;:&quot;255.255.255.0&quot;, 
  &quot;gateway&quot; : &quot;192.168.2.1&quot;, 
  &quot;nameserver&quot; : &quot;8.8.8.8&quot;, 
  &quot;ntpserver&quot; : &quot;ntp.esl.cisco.com&quot;},
  ]
}
</code></pre></li>
</ul>
</li>
<li><code>POST</code>: New Network Group<ul>
<li>Params:  A new Network group<pre><code>{ &quot;name&quot;: &quot;net01&quot;, &quot;netmask&quot; : &quot;255.255.255.0&quot;, &quot;nameserver&quot; : &quot;208.67.222.222&quot;, &quot;ntpserver&quot; : &quot;ntp.esl.cisco.com&quot;, &quot;proxy&quot;: &quot;http://proxy.esl.cisco.com:80&quot;, &quot;vlan&quot; : &quot;30&quot; }
</code></pre></li>
</ul>
</li>
<li><code>PUT</code>: Similar to a POST call but you need to add the <code>id</code> of the network group you are updating.  This is for modifying an existing network group. <ul>
<li>Params: <pre><code>{ &quot;id&quot;: &quot;1234-1234-1234-1234&quot; , &quot;name&quot;: &quot;newName&quot;, &quot;netmask&quot; : &quot;255.255.255.0&quot;, &quot;nameserver&quot; : &quot;208.67.222.222&quot;, &quot;ntpserver&quot; : &quot;ntp.esl.cisco.com&quot;, &quot;proxy&quot;: &quot;http://proxy.esl.cisco.com:80&quot;, &quot;vlan&quot; : &quot;30&quot; }
</code></pre></li>
</ul>
</li>
<li><code>DELETE</code>: Delete existing Network group<ul>
<li>Params: <code>&apos;{&quot;name&quot;: &quot;somenetworkname...&quot; }&apos;</code></li>
<li>Errors:  You should get an error if a network group is already in use by one or most hosts. </li>
</ul>
</li>
</ul>
<h2 id="hosts">Hosts</h2>
<h3 id="apiv2hosts"><code>/api/v2/hosts</code></h3>
<ul>
<li><p><code>GET</code>: Get all the hosts</p>
<ul>
<li>Params:   <code>none</code></li>
<li>Example:  <code>curl -X GET $KUBAM_API/api/v2/hosts</code></li>
<li>Returns:  Current list of hosts</li>
</ul>
</li>
<li><p><code>POST</code>: Update all the hosts.</p>
<ul>
<li><p>Params:    list of all hosts</p>
<pre><code>[
  {&apos;name&apos;: &apos;kube01&apos;, &apos;ip&apos;: &apos;172.20.30.1&apos;, &apos;os&apos;: &apos;centos7.4&apos;, &apos;role&apos;: &apos;generic&apos;, &apos;network_group&apos;: &apos;&apos;},
  {&apos;name&apos;: &apos;kube02&apos;, &apos;ip&apos;: &apos;172.20.30.2&apos;, &apos;os&apos;: &apos;centos7.4&apos;, &apos;role&apos;: &apos;k8s master&apos;, &apos;network_group&apos;: &apos;&apos;, &apos;server_group&apos;: &apos;&apos;}
]
</code></pre></li>
</ul>
</li>
<li><p><code>DELETE</code>: Delete existing Host. </p>
<ul>
<li>Params:   <code>{&apos;name&apos;: &apos;kube01&apos;}</code></li>
<li>Errors:   An error will occur if there is no hosts to delete.</li>
</ul>
</li>
</ul>
<h2 id="iso">ISO</h2>
<h3 id="apiv1catalog"><code>/api/v1/catalog</code></h3>
<ul>
<li><code>GET</code></li>
</ul>
<h3 id="apiv1isos"><code>/api/v1/isos</code></h3>
<ul>
<li><code>GET</code></li>
</ul>
<h3 id="apiv1isosboot"><code>/api/v1/isos/boot</code></h3>
<ul>
<li><code>POST</code></li>
</ul>
<h3 id="apiv1isosmap"><code>/api/v1/isos/map</code></h3>
<ul>
<li><code>GET</code></li>
<li><code>POST</code></li>
</ul>
<h2 id="ssh-keys">SSH Keys</h2>
<h3 id="apiv1keys"><code>/api/v1/keys</code></h3>
<ul>
<li><code>GET</code></li>
<li><code>POST</code></li>
</ul>
<h2 id="deploy">Deploy</h2>
<h3 id="apiv2deployimages"><code>/api/v2/deploy/images</code></h3>
<p>Deploy the boot media. </p>
<ul>
<li><code>POST</code></li>
</ul>
<p>Unique or all of them.  Allow multiple servers to be created.  If nothing is passed in, all servers will have boot images created for them. </p>
<pre><code>[ &quot;host1&quot;, &quot;host2&quot;, &quot;host3&quot;, ...]
</code></pre>
                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="./" class="navigation navigation-prev " aria-label="Previous page: KUBAM Developer">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="APIGUIDE.html" class="navigation navigation-next " aria-label="Next page: KUBAM API Walkthrough">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"KUBAM API","level":"3.6.1","depth":2,"next":{"title":"KUBAM API Walkthrough","level":"3.6.2","depth":2,"path":"kubam/developer/APIGUIDE.md","ref":"kubam/developer/APIGUIDE.md","articles":[]},"previous":{"title":"KUBAM Developer","level":"3.6","depth":1,"path":"kubam/developer/README.md","ref":"kubam/developer/README.md","articles":[{"title":"KUBAM API","level":"3.6.1","depth":2,"path":"kubam/developer/API.md","ref":"kubam/developer/API.md","articles":[]},{"title":"KUBAM API Walkthrough","level":"3.6.2","depth":2,"path":"kubam/developer/APIGUIDE.md","ref":"kubam/developer/APIGUIDE.md","articles":[]},{"title":"KUBAM YAML","level":"3.6.3","depth":2,"path":"kubam/developer/YAML.md","ref":"kubam/developer/YAML.md","articles":[]}]},"dir":"ltr"},"config":{"gitbook":"*","theme":"default","variables":{},"plugins":[],"pluginsConfig":{"highlight":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"}},"file":{"path":"kubam/developer/API.md","mtime":"2018-11-14T21:22:31.959Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2019-02-13T00:23:02.062Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

